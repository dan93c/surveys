CREATE DATABASE IF NOT EXISTS `surveys_db` /*!40100 DEFAULT CHARACTER SET utf8 */;
USE `surveys_db`;

DROP TABLE IF EXISTS `completed_answers`;
DROP TABLE IF EXISTS `questions`;
DROP TABLE IF EXISTS `survey_results`;
DROP TABLE IF EXISTS `surveys`;

CREATE TABLE `surveys` (
  `SVYID` bigint(20) NOT NULL AUTO_INCREMENT,
  `SVYNAME` varchar(255) DEFAULT NULL,
  `SVYDSC` varchar(255) DEFAULT NULL,
  `SVYCRTTIME` datetime DEFAULT NULL,
  `SVYCRTUSER` varchar(255) DEFAULT NULL,
  `SVYUPDTIME` datetime DEFAULT NULL,
  `SVYUPDUSER` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`SVYID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `questions` (
  `QSTID` bigint(20) NOT NULL AUTO_INCREMENT,
  `QSTTXT` varchar(255) DEFAULT NULL,
  `QSTANS` varchar(255) DEFAULT NULL,
  `QSTTYPE` varchar(255) DEFAULT NULL,
  `QSTCRTTIME` datetime DEFAULT NULL,
  `QSTCRTUSER` varchar(255) DEFAULT NULL,
  `QSTUPDTIME` datetime DEFAULT NULL,
  `QSTUPDUSER` varchar(255) DEFAULT NULL,
  `QSTSVY` bigint(20) DEFAULT NULL,
  PRIMARY KEY (`QSTID`),
  KEY `QSTSVY_idx` (`QSTSVY`),
  CONSTRAINT `QSTSVY` FOREIGN KEY (`QSTSVY`) REFERENCES `surveys` (`SVYID`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `survey_results` (
  `SVRID` bigint(20) NOT NULL AUTO_INCREMENT,
  `SVRCRTTIME` datetime DEFAULT NULL,
  `SVRCRTUSER` varchar(255) DEFAULT NULL,
  `SVRUPDTIME` datetime DEFAULT NULL,
  `SRVUPDUSER` varchar(255) DEFAULT NULL,
  `SVRSVY` bigint(20) DEFAULT NULL,
  PRIMARY KEY (`SVRID`),
  KEY `SVRSVY_idx` (`SVRSVY`),
  CONSTRAINT `SVRSVY` FOREIGN KEY (`SVRSVY`) REFERENCES `surveys` (`SVYID`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `completed_answers` (
  `ANSID` bigint(20) NOT NULL AUTO_INCREMENT,
  `ANSTXT` varchar(255) DEFAULT NULL,
  `ANSCRTTIME` datetime DEFAULT NULL,
  `ANSCRTUSER` varchar(255) DEFAULT NULL,
  `ANSUPDTIME` datetime DEFAULT NULL,
  `ANSUPDUSER` varchar(255) DEFAULT NULL,
  `ANSQST` bigint(20) DEFAULT NULL,
  `ANSSVR` bigint(20) DEFAULT NULL,
  PRIMARY KEY (`ANSID`),
  KEY `ANSQST_idx` (`ANSQST`),
  KEY `ANSSVR_idx` (`ANSSVR`),
  CONSTRAINT `ANSQST` FOREIGN KEY (`ANSQST`) REFERENCES `questions` (`QSTID`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `ANSSVR` FOREIGN KEY (`ANSSVR`) REFERENCES `survey_results` (`SVRID`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
